<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Digital Image Correlation Engine: DICe_CustomApplication</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Digital Image Correlation Engine
   &#160;<span id="projectnumber">Version 1.0</span>
   </div>
   <div id="projectbrief">A modular, high-performance, image correlation tool used to compute full-field displacements and strains from digital images</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">DICe_CustomApplication </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Copyright 2015 Sandia Corporation. Under the terms of Contract DE-AC04-94AL85000 with Sandia Corporation, the U.S. Government retains certain rights in this software.</p>
<h1><a class="anchor" id="autotoc_md42"></a>
Introduction</h1>
<p>This section of the documentation describes how to write a custom DIC application with <a class="el" href="class_d_i_ce.html" title="A generic class that provides an abstraction of the local DIC shape function.">DICe</a>. For the example below, all of the steps assume that a Linux operating system is being used. For Windows, the cmake script needs to be modified to produce nmake makefiles, and the appropriate scripts should be exectuted as batch files.</p>
<p>The files for this example are in the folder <code>dice/examples/custom_app</code>. The <code>main.cpp</code> file provides a simple example to follow when developing a more sophisticated application.</p>
<h2><a class="anchor" id="autotoc_md43"></a>
Code Design and Workflow</h2>
<p>A basic outline for how <a class="el" href="class_d_i_ce.html" title="A generic class that provides an abstraction of the local DIC shape function.">DICe</a> performs a correlation is as follows. If more than one image is correlated, the basic workflow is the same, just applied numerous times.</p>
<p>Initialization phase:</p>
<ul>
<li>The reference and deformed image are read into memory</li>
<li>The correlation parameters are defined</li>
<li>Subsets are defined (for the local algorithm)</li>
</ul>
<p>Execution phase:</p>
<ul>
<li>The correlation is executed</li>
<li>Results are written to disk</li>
<li>The ref or def images can be changed and the execution phase repeated</li>
</ul>
<p>All of the initialization data and correlation parameters are stored in a <code><a class="el" href="class_d_i_ce_1_1_schema.html" title="The centralized container for the correlation plan and parameters.">DICe::Schema</a></code>, this class controls the algorithms, images, and subset locations. The <code><a class="el" href="class_d_i_ce_1_1_schema.html" title="The centralized container for the correlation plan and parameters.">DICe::Schema</a></code> also stores the correlation results and all other fields. An image is stored as an array in a <code><a class="el" href="class_d_i_ce_1_1_image.html">DICe::Image</a></code>. A copy of a portion of the image intensity array is made available through a <code><a class="el" href="class_d_i_ce_1_1_subset.html" title="Subsets are used to store temporary collections of pixels for comparison between the reference and de...">DICe::Subset</a></code>. The bulk of the correlation algorithm resides in a <code><a class="el" href="class_d_i_ce_1_1_objective.html" title="A container class for the subsets, optimization algorithm and initialization routine used to correlat...">DICe::Objective</a></code>. More details on each of these are provided in the class documentation.</p>
<h2><a class="anchor" id="autotoc_md44"></a>
Rules of Thumb</h2>
<p>When developing a custom application using <a class="el" href="class_d_i_ce.html" title="A generic class that provides an abstraction of the local DIC shape function.">DICe</a>, keep the following points in mind:</p>
<ul>
<li>The number of subsets cannot change once a <a class="el" href="class_d_i_ce_1_1_schema.html" title="The centralized container for the correlation plan and parameters.">DICe::Schema</a> is initialized. If the number of subsets needs to change (for instance, using subset adaptivity), re-instantiate a new <a class="el" href="class_d_i_ce_1_1_schema.html" title="The centralized container for the correlation plan and parameters.">DICe::Schema</a>.</li>
<li>The locations of subset centroids can change after initialization, but not the number.</li>
<li>New correlation parameters can be used for an old <a class="el" href="class_d_i_ce_1_1_schema.html" title="The centralized container for the correlation plan and parameters.">DICe::Schema</a> by calling the set_params() method and passing in the new parameters as a Teuchos::ParameterList</li>
<li>The reference or deformed images can be changed after the <a class="el" href="class_d_i_ce_1_1_schema.html" title="The centralized container for the correlation plan and parameters.">DICe::Schema</a> is initialized with a call to <code>set_ref_image()</code> or <code>set_def_image()</code>. These ref and def images should be the same dimensions, and the new ref or def image cannot change the image dimensions</li>
</ul>
<h2><a class="anchor" id="autotoc_md45"></a>
Custom DIC Application Example</h2>
<p>Before building the custom app example, make sure that when the <a class="el" href="class_d_i_ce.html" title="A generic class that provides an abstraction of the local DIC shape function.">DICe</a> source was built, the </p><pre class="fragment">$ make install
</pre><p>command was called. This will ensure that the libraries and header files are grouped together in the install directory to be referenced in the do-custom-app-cmake file below for the DICE_HEADER_DIR and DICE_LIB_DIR variables.</p>
<p>An example project which can be used to build a custom DIC application using <a class="el" href="class_d_i_ce.html" title="A generic class that provides an abstraction of the local DIC shape function.">DICe</a> methods is provided in the examples directory in the folder </p><pre class="fragment">dice/tests/examples/custom_app
</pre><p>To use this folder as a starting point for a new project, copy the folder and its contents to a new location. </p><pre class="fragment">cp -r dice/tests/examples/custom_app ./&lt;new_project_location&gt;
</pre><p>Inside the project folder there may exist a <code>src</code> directory which can be removed, this was an artifact of including the <code>custom_app</code> example in the regression tests for <a class="el" href="class_d_i_ce.html" title="A generic class that provides an abstraction of the local DIC shape function.">DICe</a>. It is not needed for building a custom application outside of <a class="el" href="class_d_i_ce.html" title="A generic class that provides an abstraction of the local DIC shape function.">DICe</a>.</p>
<p>Create a <code>build</code> directory in the top level of the project and change directories into it. </p><pre class="fragment">mkdir build
cd build
</pre><p>Inside the build directory, create a CMake script similar to the example given in /DICe/scripts/ubuntu/do-custom-app-cmake on Linux or a <code>do-cmake.bat</code> file on Windows. Note that some variables, like DICE_ENABLE_GLOBAL have to match the CMake settings used for the <a class="el" href="class_d_i_ce.html" title="A generic class that provides an abstraction of the local DIC shape function.">DICe</a> source build.</p>
<p>Then, run the configuration </p><pre class="fragment">$ ./do-custom-app-cmake
</pre><p>Here we again use the <code>$</code> symbol to denote the command line prompt. After the project is configured, build it with </p><pre class="fragment">$ make
</pre><p>To test that the application was built correctly, change directories back to the project top level dir (where the input xml files are located) and run the executable </p><pre class="fragment">$ cd ../
$ ./build/main
</pre><p>The source file <code>main.cpp</code> in the top level directory has a number of notes in the comments to help with setting up a <a class="el" href="class_d_i_ce_1_1_schema.html" title="The centralized container for the correlation plan and parameters.">DICe::Schema</a> and executing a correlation. This file is a good starting place for developing a custom DIC application. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Jan 31 2020 14:12:43 for Digital Image Correlation Engine by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
